{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/ImagePopup.js","utils/api.js","components/AuthUser.js","components/Register.js","components/Login.js","utils/auth.js","images/success.svg","images/fail.svg","components/InfoTooltip.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","projectLogo","alt","exact","path","to","email","onClick","onSignOut","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","cardLikeButtonClassName","link","name","onCardClick","onCardDelete","type","onCardLike","length","Main","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","item","onRemoveCard","Footer","Date","getFullYear","PopupWithForm","isOpen","onSubmit","noValidate","title","children","textButton","id","onClose","AddPlacePopup","useState","setName","setLink","useEffect","e","preventDefault","defaultValue","value","placeholder","required","minLength","maxLength","onChange","target","EditProfilePopup","description","setDescription","onUpdateUser","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","ImagePopup","api","url","this","_url","res","ok","json","Promise","reject","status","fetch","headers","authorization","localStorage","getItem","then","_checkResponse","formData","method","body","JSON","stringify","newCard","linkAvatar","AuthUser","valueEmail","changeEmail","valuePassword","changePassword","Register","setEmail","password","setPassword","onRegister","Login","onLogin","baseUrl","checkResponse","statusText","InfoTooltip","success","fail","ProtectedRoute","Component","component","loggedIn","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","tooltipStatus","setTooltipStatus","history","useHistory","closeAllPopups","getProfileInfo","catch","err","console","error","getInitialCards","data","jwt","token","push","log","Provider","removeItem","i","changeLikeCardStatus","state","c","deleteCard","removeCard","filter","auth","setItem","editProfile","updateAvatar","postCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7f39291d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.9acae848.svg\";","import React from 'react';\r\nimport projectLogo from '../images/logo.svg';\r\nimport { Route, Link } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n    return (\r\n        <header className='header' >\r\n            <img src={projectLogo} alt='Логотип' className='header__logo' />\r\n            <Route exact path='/sign-in'>\r\n            <Link className='header__link' to='/sign-up'>Зарегистрироваться</Link>\r\n            </Route>\r\n            <Route exact path='/sign-up'>\r\n            <Link className='header__link' to='/sign-in'>Войти</Link>\r\n            </Route>\r\n            <Route exact path='/'>\r\n            <p className='header__text'>{props.email}<Link className='header__link' to='/sign-in' onClick={props.onSignOut}>Выйти</Link></p> \r\n            </Route>\r\n        </header>\r\n    )\r\n}\r\nexport default Header;","import React from 'react'\r\n\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React, { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    const isOwn = props.card.owner === currentUser._id;\r\n    const cardDeleteButtonClassName = (\r\n        `${isOwn ? 'galery__card-remove' : 'galery__card-remove_hidden'}`\r\n    );\r\n\r\n    const isLiked = props.card.likes.some((likes) => likes === currentUser._id);\r\n    const cardLikeButtonClassName = `galery__card-like ${isLiked ? 'galery__card-like_active' : ''}`;\r\n\r\n    function handleClick() {\r\n        props.onCardClick({ name: props.card.name, link: props.card.link });\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        props.onCardLike(props.card)\r\n\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        props.onCardDelete(props.card)\r\n    }\r\n\r\n    return (\r\n        <div className=\"galery__card\">\r\n            <img src={props.card.link} alt={props.card.name} className=\"galery__card-image\" onClick={handleClick} />\r\n            <button className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n            <div className=\"galery__card-wrapper\">\r\n                <h2 className=\"galery__card-title\">{props.card.name}</h2>\r\n                <div className=\"galery__card-like-wrapper\">\r\n                    <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick}></button>\r\n                    <p className=\"galery__card-like-number\">{props.card.likes.length}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Card;","import React, { useContext } from 'react';\r\nimport Card from './Card.js'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n\r\n    return (\r\n        <main className=\"content\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__wrapper-avatar\">\r\n                    <img src={currentUser.avatar} alt=\"Профиль\" className=\"profile__avatar\" />\r\n                    <button className=\"profile__edit-avatar\" onClick={props.onEditAvatar} />\r\n                </div>\r\n                <div className=\"profile__wrapper\">\r\n                    <div className=\"profile__wrapper-text\">\r\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                        <button className=\"profile__button-edit\" type=\"button\" onClick={props.onEditProfile}></button>\r\n                    </div>\r\n                    <p className=\"profile__description\">{currentUser.about}</p>\r\n                </div>\r\n                <button className=\"profile__button-add\" type=\"button\" onClick={props.onAddPlace} />\r\n            </section>\r\n\r\n            <section className=\"galery\">\r\n                {props.cards.map((item) => {\r\n                    return (<Card card={item} key={item._id} onCardClick={props.onCardClick} onCardDelete={props.onCardDelete} onRemoveCard={props.onRemoveCard} onCardLike={props.onCardLike}\r\n                    />)\r\n                })}\r\n            </section>\r\n        </main>\r\n    )\r\n}\r\nexport default Main;\r\n","import React from 'react';\r\nimport '../index.css';\r\n\r\nfunction Footer() {\r\n    return ( \r\n        <footer className = \"footer content\" >\r\n        <p className = \"footer__copyright\" > {`©${new Date().getFullYear()} Mesto Russia`} </p> \r\n        </footer>\r\n    )\r\n}\r\nexport default Footer;","import React from 'react';\r\n\r\n\r\nfunction PopupWithForm(props) {\r\n    return (\r\n        <div className={`popup ${props.isOpen && 'popup_opened'}`}>\r\n            <form className={`popup__container`} name={props.name} onSubmit={props.onSubmit} noValidate>\r\n                <h2 className=\"popup__title\">{props.title}</h2>\r\n                {props.children}\r\n                <button className=\"popup__save-button popup__button\" type=\"submit\">{props.textButton}</button>\r\n                <button className=\"popup__close-button\" type=\"button\" id=\"close-edit-popup\" onClick={props.onClose} />\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm;","import React, { useState, useEffect } from 'react'\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\n\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n    const [name, setName] = useState('');\r\n    const [link, setLink] = useState('');\r\n\r\n    useEffect(() => {\r\n        setName('');\r\n        setLink('');\r\n    }, [props.isOpen])\r\n\r\n\r\n    function changeName(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function changeLink(e) {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        // Запрещаем браузеру переходить по адресу формы\r\n        e.preventDefault();\r\n\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        props.onAddPlace({\r\n            name,\r\n            link,\r\n        });\r\n    }\r\n    return (\r\n        <PopupWithForm\r\n            onSubmit={handleSubmit}\r\n            isOpen={props.isOpen}\r\n            onClose={props.onClose}\r\n            name='add-card-form'\r\n            title='Новое место'\r\n            textButton='Создать'>\r\n            <input defaultValue={''} value={name} type=\"text\" className=\"popup__input\" name=\"name\" id=\"place-name\" placeholder=\"Название\" required minLength=\"2\" maxLength=\"30\" onChange={changeName} />\r\n            <span id=\"place-name-error\" className=\"error\"></span>\r\n            <input defaultValue={''} value={link} type=\"url\" className=\"popup__input\" name=\"link\" id=\"image-link\" placeholder=\"Ссылка на картинку\" required onChange={changeLink} />\r\n            <span id=\"image-link-error\" className=\"error\"></span>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n\r\n    useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }, [currentUser]);\r\n\r\n\r\n\r\n    function changeName(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function changeDescription(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        // Запрещаем браузеру переходить по адресу формы\r\n        e.preventDefault();\r\n\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        props.onUpdateUser({\r\n            name,\r\n            about: description,\r\n        });\r\n    }\r\n    return (\r\n        <PopupWithForm\r\n            onSubmit={handleSubmit}\r\n            isOpen={props.isOpen}\r\n            onClose={props.onClose}\r\n            name='edit-profile-form'\r\n            title='Редактирование профиля'\r\n            textButton='Сохранить'>\r\n            <input type=\"text\" defaultValue={name} className=\"popup__input\" name=\"name\" id=\"name\" required minLength=\"2\" maxLength=\"40\" onChange={changeName} />\r\n            <span id=\"name-error\" className=\"error\"></span>\r\n            <input type=\"text\" defaultValue={description} className=\"popup__input\" name=\"about\" id=\"about-me\" required minLength=\"2\" maxLength=\"200\" onChange={changeDescription} />\r\n            <span id=\"about-me-error\" className=\"error\"></span>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup\r\n","import React, { useRef } from 'react'\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\n\r\nfunction EditAvatarPopup(props) {\r\n    const avatarRef = useRef();\r\n\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        props.onUpdateAvatar({\r\n            avatar: avatarRef.current.value,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            onSubmit={handleSubmit}\r\n            isOpen={props.isOpen}\r\n            onClose={props.onClose}\r\n            name='avatar-form'\r\n            title='Обновить аватар'\r\n            textButton='Сохранить'>\r\n            <input ref={avatarRef} type=\"url\" className=\"popup__input\" name=\"link\" id=\"avatar-link\" placeholder=\"Название\" required />\r\n            <span id=\"avatar-link-error\" className=\"error\"></span>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\n\r\n\r\nfunction ImagePopup(props) {\r\n    return (\r\n        <div className={`popup ${props.card.link.length && 'popup_opened'}`} >\r\n            <div className=\"popup__image-container\" >\r\n                <figure className=\"popup__figure\" >\r\n                    <img src={props.card.link} alt={props.card.name} className=\"popup__image\" />\r\n                    <figcaption className=\"popup__caption\" > {props.card.name} </figcaption>\r\n                </figure>\r\n                <button className=\"popup__close-button\"\r\n                    type=\"button\"\r\n                    id=\"close-image-popup\"\r\n                    onClick={props.onClose} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ImagePopup;","class Api {\r\n  constructor({ url }) {\r\n    this._url = url;\r\n  }\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n  getInitialCards() {\r\n    return fetch(`${this._url}cards`, {\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n  getProfileInfo() {\r\n    return fetch(`${this._url}users/me`, {\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n  editProfile(formData) {\r\n    return fetch(`${this._url}users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name: formData.name,\r\n        about: formData.about,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n  postCard(newCard) {\r\n    return fetch(`${this._url}cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name: newCard.name,\r\n        link: newCard.link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n  removeCard(id) {\r\n    return fetch(`${this._url}cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n  changeLikeCardStatus(id, isLiked) {\r\n    return fetch(`${this._url}cards/${id}/likes`, {\r\n      method: isLiked ? 'PUT' : 'DELETE',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  updateAvatar(linkAvatar) {\r\n    return fetch(`${this._url}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: linkAvatar.avatar,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst config = {\r\n  url: 'https://api.domainname.emil.nomoredomains.club/',\r\n};\r\n\r\nconst api = new Api(config);\r\n\r\nexport default api;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nfunction AuthUser(props) {\r\n    return (\r\n        <form className='auth' name={props.name} onSubmit={props.onSubmit} noValidate>\r\n        <h2 className='auth__title'>{props.title}</h2>\r\n        <input  type=\"email\" className=\"auth__input\" name=\"email\" value={props.valueEmail} id=\"email\" placeholder=\"Email\" required onChange={props.changeEmail} />\r\n        <span id=\"email-error\" className=\"error\"></span>\r\n        <input type=\"password\" className=\"auth__input\" name=\"password\" value={props.valuePassword} id=\"password\" placeholder=\"Пароль\" required onChange={props.changePassword} />\r\n        <span id=\"password-error\" className=\"error\"></span>\r\n        <button className='auth__button' type='submit'>{props.textButton}</button>\r\n        {props.name === 'sign-up'? <p className='auth__text'> Уже зарегистрированы?<Link className='auth__link' exact to='/sign-in'> Войти</Link></p> :''}\r\n    </form>\r\n    )\r\n}\r\n\r\nexport default AuthUser;\r\n","import React, { useState } from 'react';\r\nimport AuthUser from './AuthUser';\r\n\r\n\r\nfunction Register(props) {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n \r\n    function handleInputEmail(e) {\r\n        setEmail(e.target.value);\r\n    }\r\n\r\n    function handleInputPassword(e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e){\r\n   \r\n        e.preventDefault();\r\n        props.onRegister(email, password);\r\n      }\r\n\r\n    return (\r\n        <AuthUser\r\n        onSubmit={handleSubmit}\r\n        valueEmail={email}\r\n        valuePassword={password}\r\n        changeEmail={handleInputEmail}\r\n        changePassword={handleInputPassword}\r\n        name='sign-up'\r\n        title='Регистрация'\r\n        textButton='Зарегистрироваться'>\r\n    </AuthUser>\r\n    )\r\n}\r\n\r\nexport default Register;\r\n","import React, { useState } from 'react';\r\nimport AuthUser from './AuthUser';\r\n\r\n\r\nfunction Login(props) {\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n\r\n    function handleInputEmail(e) {\r\n        setEmail(e.target.value);\r\n    }\r\n\r\n    function handleInputPassword(e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n    e.preventDefault();\r\n      props.onLogin({password, email})\r\n    }\r\n\r\n\r\n    return (\r\n        <AuthUser\r\n            onSubmit={handleSubmit}\r\n            valueEmail={email}\r\n            valuePassword={password}\r\n            changeEmail={handleInputEmail}\r\n            changePassword={handleInputPassword}\r\n            name='sign-in'\r\n            title='Вход'\r\n            textButton='Войти'>\r\n        </AuthUser>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","export const baseUrl = 'https://api.domainname.emil.nomoredomains.club/';\r\n\r\nexport const register = (email, password) => {\r\n    return fetch(`${baseUrl}signup`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ password, email })\r\n        })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport const authorize = ({ password, email }) => {\r\n    return fetch(`${baseUrl}signin`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ password, email })\r\n        })\r\n        .then(checkResponse)\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n    return fetch(`${baseUrl}users/me`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`,\r\n            }\r\n        })\r\n        .then(checkResponse)\r\n        .then(data => data)\r\n}\r\n\r\nconst checkResponse = (res) => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.statusText}`)","export default __webpack_public_path__ + \"static/media/success.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/fail.d4ce2a26.svg\";","import success from '../images/success.svg';\r\nimport fail from '../images/fail.svg';\r\n\r\nfunction InfoTooltip(props) {\r\n\r\n    return (\r\n        <div className={`popup ${props.status && 'popup_opened'}`}>\r\n            <div className='popup__container popup__container_img'>\r\n            <button className='popup__close-button' type='button' id='close-edit-popup' onClick={props.onClose} />\r\n                <img\r\n                    className='popup__img-status'\r\n                    src={`${props.status === 'success' ? success : fail}`} alt={`${props.status === 'success' ? 'Успешная регистрация' : 'Ошибка'}`} />\r\n                <h2 className='popup__title'>{`${props.status === 'success' ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте еще раз.'}`}</h2>\r\n            </div>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InfoTooltip;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nfunction ProtectedRoute({component: Component, ...props}) {\r\n    return (\r\n        <Route>\r\n        {() =>\r\n         props.loggedIn  === true ? <Component {...props} /> : <Redirect to='/sign-in' />\r\n       }\r\n       </Route>\r\n    )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport Header from './Header.js';\r\nimport Main from './Main.js';\r\nimport Footer from './Footer.js';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport ImagePopup from './ImagePopup.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport api from '../utils/api';\r\nimport Register from './Register';\r\nimport Login from './Login';\r\nimport * as auth from '../utils/auth';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport ProtectedRoute from './ProtectedRoute';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({ name: '', link: '' });\r\n  const [currentUser, setCurrentUser] = useState('');\r\n  const [cards, setCards] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [tooltipStatus, setTooltipStatus] = useState('');\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n      api\r\n        .getProfileInfo()\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n        });\r\n\r\n      api\r\n        .getInitialCards()\r\n        .then((data) => {\r\n          setCards(data);\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n        });\r\n    }\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('jwt')) {\r\n      let jwt = localStorage.getItem('jwt');\r\n      auth\r\n        .checkToken(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setLoggedIn(true);\r\n            setEmail(res.email);\r\n            history.push('/');\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }, [history]);\r\n\r\n  //LIKE CARD\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((i) => i === currentUser._id);\r\n\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        setCards((state) =>\r\n          state.map((c) => (c._id === card._id ? newCard : c))\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  //DELETE CARD\r\n  function handleCardDelete(deleteCard) {\r\n    api\r\n      .removeCard(deleteCard._id)\r\n      .then(() => {\r\n        setCards((cards) =>\r\n          cards.filter((card) => card._id !== deleteCard._id)\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard({ name: '', link: '' });\r\n    setTooltipStatus('');\r\n  }\r\n  function handleCardClick(Card) {\r\n    setSelectedCard(Card);\r\n  }\r\n\r\n  function handleUpdateUser(formData) {\r\n    api\r\n      .editProfile(formData)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar(formData) {\r\n    api\r\n      .updateAvatar(formData)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  //ADD CARD\r\n  function handleAddPlaceSubmit(newCard) {\r\n    api.postCard(newCard).then((newCard) => {\r\n      setCards([newCard, ...cards]);\r\n      closeAllPopups();\r\n    });\r\n  }\r\n\r\n  //REGISTRATION\r\n  function onRegister(email, password) {\r\n    auth\r\n      .register(email, password)\r\n      .then((res) => {\r\n        if (res._id) {\r\n          setTooltipStatus('success');\r\n          history.push('/sign-in');\r\n        }\r\n      })\r\n      .catch((err) => setTooltipStatus('fail'));\r\n  }\r\n\r\n  //SIGN IN\r\n  function onLogin({ password, email }) {\r\n    auth\r\n      .authorize({ password, email })\r\n      .then((data) => {\r\n        if (data.token) {\r\n          setEmail(email);\r\n          localStorage.setItem('jwt', data.token);\r\n          setLoggedIn(true);\r\n          history.push('/');\r\n        }\r\n      })\r\n      .catch((err) => setTooltipStatus('fail'));\r\n  }\r\n\r\n  //SIGN OUT\r\n\r\n  function onSignOut() {\r\n    localStorage.removeItem('jwt');\r\n    setCurrentUser('');\r\n    setLoggedIn(false);\r\n    history.push('/sign-in');\r\n  }\r\n\r\n  return (\r\n    <div className='page'>\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Header email={email} onSignOut={onSignOut} />\r\n        <Switch>\r\n          <ProtectedRoute\r\n            exact\r\n            path='/'\r\n            loggedIn={loggedIn}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n            component={Main}\r\n          ></ProtectedRoute>\r\n          <Route exact path='/sign-up'>\r\n            <Register onRegister={onRegister} />\r\n          </Route>\r\n          <Route exact path='/sign-in'>\r\n            <Login onLogin={onLogin} />\r\n          </Route>\r\n        </Switch>\r\n        <Footer />\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n        <InfoTooltip status={tooltipStatus} onClose={closeAllPopups} />\r\n      </CurrentUserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n    <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}